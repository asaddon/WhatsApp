<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WA Chat Box Example</title>
</head>
<body>
    <body background="https://images.unsplash.com/photo-1675004865285-d0afc22903cf?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=1080&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTY3Nzc0NzUxOA&ixlib=rb-4.0.3&q=80&w=1920"></body>
    <script>
        (function() {
            let chatBoxInitialized = false;

            function loadChatBoxScript(callback) {
                const script = document.createElement('script');
                script.src = "https://cdn.jsdelivr.net/gh/asaddon/WhatsApp@refs/heads/main/dist/WhatsAppChatBox.min.js";
                script.onload = callback; // Call the callback function once the script is loaded
                document.head.appendChild(script);
            }

            function initializeChatBox() {
                if (!chatBoxInitialized) {
                    // Initialize the chat box after the script is loaded
                    const chatBox = new window.WAChatBox({
                        link: "https://wa.me/123456789",
                        user: {
                            name: "My Company",
                            avatar: "https://randomuser.me/api/portraits/women/66.jpg",
                            status: "Typically replies within few hours!"
                        },
                        chat_name: "Sales", 
                        text: "Hey There ðŸ‘‹<br>Let's talk to get a Price Quote!",
                        button_text: "",
                        tooltipText: "We're on WhatsApp!",
                        tooltipTimeout: 15000,
                    });

                    chatBoxInitialized = true; // Set the flag to true after initialization
                }
            }

            // Add event listeners for user interactions
            function onUserInteraction() {  // Corrected function name
                if (!chatBoxInitialized) {
                    loadChatBoxScript(initializeChatBox); // Load the script and initialize the chat box
                }
            }

            window.addEventListener('scroll', onUserInteraction);
            window.addEventListener('mousedown', onUserInteraction);
            window.addEventListener('mousemove', onUserInteraction);
            window.addEventListener('touchstart', onUserInteraction);
            window.addEventListener('keydown', onUserInteraction);
        })(); // Immediately invoke the function
    </script>
</body>
</html>