<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WA Chat Box Example</title>
</head>
<body background="https://images.unsplash.com/photo-1533912352517-92dd08116ea4?q=80&w=1978&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"></body>
    <script>
        (function() {
            let chatBoxInitialized = false;

            function loadChatBoxScript(callback) {
                const script = document.createElement('script');
                script.src = "https://cdn.jsdelivr.net/gh/asaddon/WhatsApp@refs/heads/main/dist/WhatsAppChatBox.min.js";
                script.onload = callback; // Call the callback function once the script is loaded
                document.head.appendChild(script);
            }

            function initializeChatBox() {
                if (!chatBoxInitialized) {
                    // Initialize the chat box after the script is loaded
                    const chatBox = new window.WAChatBox({
                        link: "https://wa.me/123456789",
                        user: {
                            name: "My Company",
                            avatar: "https://randomuser.me/api/portraits/women/66.jpg",
                            status: "Typically replies within few hours!"
                        },
                        chat_name: "Sales", 
                        text: "Hey There ðŸ‘‹<br>Let's talk to get a Price Quote!",
                        tooltipText: "Hi, I am here to assist you!",
                        tooltipTimeout: 15000,
                    });

                    chatBoxInitialized = true; // Set the flag to true after initialization
                }
            }

            // Immediately load the script and initialize the chat box
            loadChatBoxScript(initializeChatBox);

        })(); // Immediately invoke the function
    </script>
</body>
</html>
